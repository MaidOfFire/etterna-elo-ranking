# Etterna Elo Ranking

Uses player data to approximate players' **Elo rating**.

## What is Elo rating?

The **Elo rating system** is a method for calculating the relative skill levels of players. Elo assigns players numeric ratings that increase or decrease based on wins, losses, and draws against opponents. 

Higher Elo indicates higher skill, and differences in ratings predict the outcome probabilities of matches between players.

## Rating Table
_Last updated: May 21, 2025_

|                  |   overall |   stream |   jumpstream |   handstream |   chordjacks |   technical |
|:-----------------|----------:|---------:|-------------:|-------------:|-------------:|------------:|
| Saragi           |      2244 |     2260 |         2154 |         2275 |         2199 |        1973 |
| maya             |      2174 |     2206 |         2133 |         2185 |         1957 |        2006 |
| AnMaO            |      2132 |     2226 |         2044 |         2039 |         1777 |        2128 |
| jja              |      2103 |     2013 |         2185 |         2111 |         1933 |        1804 |
| clerpy           |      2085 |     2145 |         2068 |         1964 |         1988 |        2041 |
| puyihari         |      2048 |     2196 |         1968 |         1906 |         1939 |        1979 |
| Devplayzz        |      2021 |     1964 |         2070 |         1733 |         1520 |        2030 |
| muelsyse         |      1999 |     1721 |         2053 |         1986 |         1889 |        1957 |
| SillyFangirl     |      1978 |     1798 |         2025 |         1961 |         1948 |        1817 |
| TristanJacob9    |      1977 |     1968 |         1848 |         1878 |         2085 |        1858 |
| Monheim          |      1977 |     1721 |         1887 |         1878 |         2164 |        1841 |
| Shadow           |      1952 |     1992 |         1930 |         1826 |         1594 |        1932 |
| YumaOs           |      1931 |     1780 |         1836 |         1959 |         1998 |        1542 |
| waterquality     |      1928 |     1827 |         2010 |         1924 |         1709 |        1850 |
| skadi            |      1913 |     1792 |         1891 |         1967 |         1879 |        1647 |
| vaydex           |      1910 |     1650 |         1890 |         1592 |         2189 |        1492 |
| yumaTV           |      1907 |     1928 |         1959 |         1603 |         1835 |        1717 |
| theman234tonk    |      1902 |     1886 |         1859 |         1838 |         1588 |        1961 |
| paocompaoepaa    |      1892 |     2065 |         1577 |         1934 |         1416 |        1675 |
| snoverpk         |      1890 |     1926 |         1871 |         1874 |         1596 |        1809 |
| Kyuui            |      1877 |     1795 |         1903 |         1667 |         1897 |        1832 |
| Noraa            |      1877 |     1838 |         2001 |         1706 |         1736 |        1793 |
| selrrrrr         |      1873 |     1647 |         2044 |         1697 |         1878 |        1631 |
| DanTDM           |      1856 |     2000 |         1733 |         1702 |         1651 |        1834 |
| Meatloaf         |      1854 |     1927 |         1808 |         1828 |         1462 |        1596 |
| wLeyo            |      1849 |     1810 |         1887 |         1851 |         1710 |        1692 |
| Bistulex         |      1842 |     1827 |         1580 |         1942 |         1645 |        1756 |
| Delusion         |      1832 |     1716 |         1635 |         1974 |         1567 |        1806 |
| na2304           |      1815 |     1696 |         1604 |         1645 |         1963 |        1785 |
| Trescendence     |      1811 |     1604 |         1889 |         1651 |         1836 |        1709 |
| Guilherme        |      1807 |     1747 |         1687 |         1731 |         1831 |        1844 |
| lifillled        |      1797 |     1795 |         1807 |         1791 |         1565 |        1597 |
| Nico777playz     |      1794 |     1805 |         1803 |         1594 |         1772 |        1705 |
| Thiago           |      1782 |     1687 |         1808 |         1809 |         1730 |        1637 |
| marilyy          |      1770 |     1679 |         1865 |         1608 |         1439 |        1764 |
| Dystire          |      1769 |     1908 |         1577 |         1689 |         1501 |        1711 |
| sim0             |      1769 |     1621 |         1816 |         1773 |         1660 |        1717 |
| Abyss            |      1766 |     1622 |         1911 |         1694 |         1692 |        1636 |
| Vulpsi           |      1765 |     1547 |         1686 |         1588 |         1882 |        1727 |
| gongorirel       |      1760 |     1522 |         1841 |         1916 |         1486 |        1442 |
| stracciatella    |      1749 |     1805 |         1699 |         1731 |         1692 |        1711 |
| OmegaFade        |      1743 |     1840 |         1708 |         1682 |         1423 |        1601 |
| breadles         |      1742 |     1781 |         1517 |         1595 |         1706 |        1738 |
| zoobin4          |      1741 |     1762 |         1607 |         1536 |         1520 |        1852 |
| Voezux           |      1739 |     1755 |         1591 |         1795 |         1667 |        1510 |
| SOYNEBUV2        |      1739 |     1765 |         1634 |         1818 |         1539 |        1446 |
| 23Marzo          |      1736 |     1676 |         1845 |            0 |         1524 |        1687 |
| almond           |      1733 |     1856 |         1559 |         1583 |         1670 |        1675 |
| Tanmanguy7       |      1731 |     1809 |         1712 |         1592 |         1674 |        1604 |
| Vanstav          |      1731 |     1964 |         1540 |         1542 |         1546 |        1683 |
| yzmengx          |      1731 |     1482 |         1610 |         1657 |         1926 |        1423 |

Full table (271 player) [here](/output/elo_dtw_ord_skillsets.md).

---

## How matches are constructed:

Player scores are filtered leaving only scores with accuracy between **96% and 99.7%**.

For each chart and skillset (e.g., `stream`, `jumpstream`, `handstream` (defined as largest MSD)), player scores are matched as follows:

- When a player achieves a **new score** on a chart, it is paired against the **current personal best scores** of all other players on the same chart
- Each pairing becomes one "match"

The outcome of the match is given as follows:

1. **Higher rate** wins.
2. If the rate is the same, the higher **WIFE accuracy %** wins.

## Elo Update formula:

The Elo ratings are updated after each match using the standard Elo formula, with an additional **time-decay parameter ($\tau$)** that gives less weight to matches where player scores are far apart in time:

```math
R_{A,\text{new}} = R_{A,\text{old}} + K_{\text{eff}} \cdot (S_A - E_A)
```

where:

- $R_{A,\text{old}}$ and $R_{A,\text{new}}$ are player A’s Elo ratings before and after the match.
- $K_{\text{eff}}$ is the effective K-factor adjusted by time-decay:
  
```math
K_{\text{eff}} = K \cdot e^{-\Delta / \tau}
```

  Here:
  - $K$ is the base update step (typically 10–30).
  - $\Delta$ is the absolute difference in days between the two matched scores.
  - $\tau$ (**tau parameter**) controls how quickly the weight decays with time (measured in days). Larger values of $\tau$ mean slower decay; set $\tau = \infty$ to disable time decay entirely.

- $S_A$ is the actual score from the match (1 if win, 0.5 if draw, 0 if loss).
- $E_A$ is the expected score, calculated as:
  
```math
E_A = \frac{1}{1 + 10^{(R_B - R_A)/400}}
```

A large Elo difference reduces the rating changes for expected outcomes, while close-in-time matches have a stronger effect on ratings compared to matches separated by long periods.


## Running the code:

Install [UV](https://docs.astral.sh/uv/).

Initialize the project environment:
```bash
uv init
uv venv
uv sync
```

Download scores from the EtternaOnline:
```bash
uv run scripts/scrapper.py
```

Run Elo rating script:
```bash
uv run scripts/run_elo.py
```

Results will appear under the output/ directory
